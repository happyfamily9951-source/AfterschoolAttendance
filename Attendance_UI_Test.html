<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Attendance UI Test (Accent Bar - Golden Ratio + Divider)</title>
<style>
  :root {
    --gap: 16px;
    --present: #28a745;
    --absent: #dc3545;
    --leave: #ffc107;
  }

  body {
    font-family: "Inter", system-ui, sans-serif;
    background: #f8fafc;
    margin: 0;
    padding: 0;
    color: #333;
  }

  .container {
    max-width: 960px;
    margin: 0 auto;
    padding: var(--gap);
  }

  .class-info {
    text-align: center;
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 18px;
  }

  .stats {
    text-align: center;
    margin-bottom: var(--gap);
    font-size: 16px;
    font-weight: 500;
  }

  /* === æŒ‰é’®åŒºåŸŸ === */
  .btn-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--gap);
    margin-bottom: var(--gap);
  }

  .attendance-btn {
    padding: 14px 0;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    color: white;
    transition: transform 0.1s ease;
  }
  .attendance-btn.present { background: var(--present); }
  .attendance-btn.absent  { background: var(--absent); }
  .attendance-btn.leave   { background: var(--leave); color: #333; }
  .attendance-btn.active  { transform: scale(1.05); }

  /* === æŸ”å’Œåˆ†éš”çº¿ === */
  .divider {
    width: 100%;
    height: 1px;
    background: linear-gradient(to right, transparent, #d1d5db, transparent);
    margin: 18px 0;
  }

  /* === å­¦ç”Ÿå¡ç‰‡ç½‘æ ¼ === */
  .student-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--gap);
  }

  .student-card {
    position: relative;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    text-align: center;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.25s ease;
    border: 1px solid #e5e7eb;
    aspect-ratio: 1.618 / 1; /* é»„é‡‘æ¯”ä¾‹ */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  .status-bar {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 10px;
    border-top-left-radius: 14px;
    border-top-right-radius: 14px;
  }

  /* çŠ¶æ€é¢œè‰² */
  .student-card.present .status-bar { background: var(--present); }
  .student-card.absent  .status-bar { background: var(--absent); }
  .student-card.leave   .status-bar { background: var(--leave); }

  .student-name {
    font-weight: 600;
    font-size: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    margin-top: 20px;
    color: #111827;
  }

  /* Notes åŒºå§‹ç»ˆæ˜¾ç¤º */
  .student-note {
    font-size: 13px;
    color: #6b7280;
    min-height: 36px; /* ä¿æŒé«˜åº¦ä¸€è‡´ */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-top: auto;
    margin-bottom: 8px;
  }

  .student-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  /* æ‰‹æœºç«¯ï¼š1è¡Œ3ä¸ªå¡ç‰‡ */
  @media (max-width: 600px) {
    .student-grid {
      grid-template-columns: repeat(3, 1fr);
    }
    .btn-group {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
</head>
<body>
<div class="container">
  <div class="class-info" id="classTitle">2025Q3-SatFun (Sat)</div>
  <div class="stats" id="statsBar">Total: 0 | ğŸŸ¢ P: 0 | ğŸ”´ A: 0 | ğŸŸ¡ L: 0</div>

  <div class="btn-group">
    <button class="attendance-btn present active" id="presentBtn">Present</button>
    <button class="attendance-btn absent" id="absentBtn">Absent</button>
    <button class="attendance-btn leave" id="leaveBtn">Leave</button>
  </div>

  <!-- æŸ”å’Œåˆ†éš”çº¿ -->
  <div class="divider"></div>

  <div class="student-grid" id="studentGrid"></div>
</div>

<script>
  const mockResponse = {
    ok: true,
    data: [
      { studentId: "S202509210001", studentName: "å¼ ä¸‰", gender: "male", leaveNote: "Sick leave" },
      { studentId: "S202509210002", studentName: "æå››", gender: "female", leaveNote: "" },
      { studentId: "S202509210003", studentName: "ç‹äº”", gender: "male", leaveNote: "" },
      { studentId: "S202509210004", studentName: "èµµå…­", gender: "female", leaveNote: "Family event" },
      { studentId: "S202509210005", studentName: "é’±ä¸ƒ", gender: "male", leaveNote: "" },
      { studentId: "S202509210006", studentName: "å­™å…«", gender: "female", leaveNote: "" }
    ]
  };

  const grid = document.getElementById("studentGrid");
  const statsBar = document.getElementById("statsBar");
  let currentMode = "present";
  const attendanceMap = new Map();

  function renderStudents() {
    grid.innerHTML = "";
    mockResponse.data.forEach(stu => {
      const card = document.createElement("div");
      card.className = "student-card";
      card.dataset.id = stu.studentId;

      const state = stu.leaveNote ? "leave" : "present";
      attendanceMap.set(stu.studentId, state);
      card.classList.add(state);

      const bar = document.createElement("div");
      bar.className = "status-bar";
      card.appendChild(bar);

      const nameDiv = document.createElement("div");
      nameDiv.className = "student-name";
      nameDiv.textContent = stu.studentName + " ";
      const genderIcon = document.createElement("img");
      genderIcon.src = stu.gender === "male" ? "icons/male.svg" : "icons/female.svg";
      genderIcon.alt = stu.gender;
      genderIcon.width = 18;
      genderIcon.height = 18;
      nameDiv.appendChild(genderIcon);
      card.appendChild(nameDiv);

      const noteDiv = document.createElement("div");
      noteDiv.className = "student-note";
      noteDiv.textContent = stu.leaveNote ? "ğŸ“ " + stu.leaveNote : "";
      card.appendChild(noteDiv);

      card.addEventListener("click", () => onStudentClick(card, stu.studentId, noteDiv));
      grid.appendChild(card);
    });
    updateStats();
  }

  function onStudentClick(card, id, noteDiv) {
    attendanceMap.set(id, currentMode);
    card.classList.remove("present", "absent", "leave");
    card.classList.add(currentMode);

    if (currentMode === "leave") {
      let note = noteDiv.textContent.replace("ğŸ“ ", "") || "";
      note = prompt("Enter leave note:", note) || note;
      noteDiv.textContent = note ? "ğŸ“ " + note : "";
    } else {
      noteDiv.textContent = "";
    }

    updateStats();
  }

  function updateStats() {
    const total = attendanceMap.size;
    let p = 0, a = 0, l = 0;
    attendanceMap.forEach(v => {
      if (v === "present") p++;
      if (v === "absent") a++;
      if (v === "leave") l++;
    });
    statsBar.textContent = `Total: ${total} | ğŸŸ¢ P: ${p} | ğŸ”´ A: ${a} | ğŸŸ¡ L: ${l}`;
  }

  document.getElementById("presentBtn").addEventListener("click", () => setMode("present"));
  document.getElementById("absentBtn").addEventListener("click", () => setMode("absent"));
  document.getElementById("leaveBtn").addEventListener("click", () => setMode("leave"));

  function setMode(mode) {
    currentMode = mode;
    document.querySelectorAll(".attendance-btn").forEach(btn => btn.classList.remove("active"));
    document.querySelector(`.attendance-btn.${mode}`).classList.add("active");
  }

  renderStudents();
</script>
</body>
</html>

